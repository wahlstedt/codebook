<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Codebook</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Architects+Daughter&family=Mulish:wght@500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css" />
    <style>
        body {
            font-family: 'Mulish', Verdana, Geneva, sans-serif;
            font-size: 9pt;
        }

        .page {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr auto auto;
            grid-template-areas: "top top" "left right";
            height: 297mm; /* Safari cuts off pages when printing, 294mm works... */
            width: 210mm;
            break-after: page; /* Splits up each page for printing */
        }

        @media screen {
            body {
                background: lightgrey;
            }

            .page {
                border: 1px solid;
                padding: 10mm;
                margin: auto auto 50pt;
                background: white;
                box-shadow: 2px 2px 10px -3px;
            }
        }

        .js-letter {
            height: 11in;
            width: 8.5in;
        }
        
        .top {
            grid-area: top;
            display: flex; /* To make the words container take up remaining space */
            flex-direction: column;
        }

        .left {
            grid-area: left;
            align-self: start;
        }

        .right {
            grid-area: right;
            margin-left: 10pt;
            margin-top: 20pt;
        }

        .topgrid {
            display: grid;
            grid-template-columns: 80pt 1fr 80pt;
            grid-template-rows: auto;
            margin-bottom: 10pt;
        }

        .player {
            width: 24pt;
            height: 24pt;
        }

        .header {
            place-self: center;
            grid-column: 2 / 2;
            grid-row: 1 / 1;
            text-align: center;
            user-select: none;
            -webkit-user-select: none;
        }

        .header p {
            margin: 0;
            letter-spacing: 2pt;
        }

        .title {
            font-weight: 500;
            font-size: 24px;
            padding: 0 2pt;
            text-align: center;
            position: relative;
            top: -2.5pt;
        }

        .gameid {
            font-weight: 500;
            font-size: 18pt;
            text-align: right;
            grid-column: 3;
            grid-row: 1;
        }

        .key {
            place-self: center;
            width: 100%;
            max-height: 68px;
            grid-column: span 3;
            grid-row: 2;
        }

        .words-container {
            display: flex;
            flex: 1; /* To take up all available space */
            flex-direction: row;
            flex-wrap: wrap;
            align-content: stretch;
            align-items: center;
            border: 4pt solid black;
            border-radius: 40pt;
            padding: 10pt 0;
            margin-top: 20pt;
            user-select: none;
            -webkit-user-select: none;
        }

        #allwords {
            margin-top: 0;
        }

        .words-container div {
            flex: 1;
            font-size: 14pt;
            font-weight: 700;
            text-align: center;
            box-sizing: border-box;
            flex-basis: calc(20% - 6pt); /* Some leeway to allow for the border in interactive mode */
            padding: 0 6pt;
        }

        .words-container .js-strike { /* Using longhand format because Safari doesn't have the shorthand */
            text-decoration-thickness: 3pt;
            text-decoration-line: line-through;
            text-decoration-color: red;
        }

        .words-container .js-circle {
            border: 3pt green solid;
            border-radius: 16pt;
            padding: 0 4pt;
        }

        .black {
            border-width: 0;
            padding-top: 0;
            padding-bottom: 0;
        }
        
        .green {
            border-width: 5pt;
            border-style: double;
            border-radius: 20pt;
            padding-top: 5pt;
            padding-bottom: 5pt;
        }

        .white {
            border-width: 2pt;
            border-style: solid;
        }

        .star {
            position: relative;
            text-align: center;
            margin-bottom: -46px;
            margin-top: 14pt;
            width: 100%;
        }
        
        .black div {
            font-size: 12pt;
            font-weight: 600;
            flex-basis: auto;
            padding: 4pt 8pt;
            margin: 2pt;
            background-color: black;
            color: white;
        }

        .green div {
            font-size: 12pt;
            font-weight: 700;
            flex-basis: calc(33% - 8pt);
            padding: 4pt 0;
            margin: 2pt;
        }

        .helptext {
            font-size: 9pt;
            text-align: center;
            font-weight: normal;
            margin-top: 1.5pt;
        }

        #black {
            margin-top: 0;
        }

        #blackwords {
            margin-top: 18pt;
        }
        
        .helptext b {
            font-weight: 700;
        }

        .tracker {
            border-collapse: collapse;
            table-layout: fixed;
            width: 100%;
        }

        .tracker th {
            border: 1px solid black;
            width: 20pt;
            font-size: 12pt;
            font-weight: normal;
            vertical-align: bottom;
            user-select: none;
            -webkit-user-select: none;
        }

        .tracker th:nth-child(2) {
            width: auto;
            text-align: left;
            padding-left: 6pt;
            padding-bottom: 4pt;
        }

        .tracker thead tr {
            height: 25pt;
        }

        .tracker tr {
            height: 32pt;
        }

        .tracker td {
            border: 1px solid black;
        }

        .tracker td:nth-child(2) {
            border-right-style: dashed;
        }

        .tracker td:nth-child(3) {
            border-left-style: none;
        }

        .settings {
            display: grid;
            grid-row-gap: 5pt;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            grid-template-rows: auto;
            font-size: 12pt;
            text-align: center;
            border: 3pt dotted black;
            background: linear-gradient(180deg, rgba(137,207,240,1) 35%, rgba(209,242,249,1) 100%);
            border-radius: 40pt;
            padding: 10pt 0;
            width: 210mm;
            margin: auto auto 20pt;
        }

        .settings .status {
            grid-column-start: span 4;
            margin-bottom: 10pt;
        }

        .settings-wordlist {
            grid-column: 2 / 4;
        }

        .settings-start {
            grid-column-start: 2;
        }

        .settings-size {
            grid-column-start: 1;
        }

        #seed {
            width: 4em;
        }

        .setting-interact {
            align-self: start;
            grid-column: 4;
            grid-row: 6;
        }

        .customizer {
            grid-column: span 4;
            display: inline-grid;
            grid-template-columns: repeat(7, max-content);
            column-gap: 2pt;
            margin: auto; /* Center the table in the setting grid cell */
        }

        .customizer-start-col {
            grid-column: 1;
        }
        
        .customizer-line {
            grid-column: span 3;
            margin: 2px 4px 4px;
            border: 1px solid black;
            border-top: none;
            height: 5pt;
        }

        .customizer-info {
            grid-column: span 3;
            font-size: 10pt;
            position: relative;
            top: -3pt;
        }

        .customizer input[type="number"] {
            font-size: 12pt;
            max-width: 3em;
        }
        
        .customizer-reset {
            grid-column: 1 / -1;
            padding-top: 4pt;
        }

        .customizer-title {
            grid-column-start: span 7;
            margin-bottom: 3pt;
        }
        
        .customizer-symbol {
            background: white;
            padding-top: 3pt;
            border: 1px black solid;
        }

        .customizer-turns-title {
            align-self: end;
            padding-left: 20pt;
        }

        .setting-turns {
            align-self: center;
            grid-row: 3;
            grid-column: 7;
            padding-left: 20pt;
        }

        .setting-help {
            align-self: end;
        }

        .advanced {
            display: none;
        }

        .expand {
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
            grid-column: 2 / 4;
        }

        #expander {
            position: relative;
            top: 0.3em;
        }

        form {
            display: contents;
        }

        .tracker-text {
            font-size: 18pt;
            font-family: 'Architects Daughter', cursive;
            text-transform: uppercase;
            border: 0;
            margin: 0;
            vertical-align: middle;
            text-align: center;
            user-select: none;
            -webkit-user-select: none;
        }

        .js-tracker-clue {
            user-select: auto;
            -webkit-user-select: auto;
            text-align: left;
            width: calc(100% - 0.5em);
        }

        .icon {
            width: 24px;
            height: 24px;
        }

        @media print {
            .github-fork-ribbon, .settings, .settings * {
                display: none !important;
            }
        }

    </style>

    <script>
        console.log("C O D E B O O K   v1.0");
        // Init the globals
        let allWords = [];

        // These should really be in a separate file, but I want to keep everything self-contained in a single html file */
        const translations = {
            "sv": {
                "all": "Välj från dessa ord. Hittade ord markeras även nedanför. Du och din medspelare har 9 rundor på er att hitta 15 av de 25 orden.",
                "green": "Ge ledtrådar till dessa ord. Hittade ord markeras även ovanför.",
                "white": "Om din medspelare väljer ett av dessa ord avslutas rundan.",
                "black": "Om din medspelare väljer ett av dessa ord förlorar ni spelet!",
                "clue": "Ledtråd"
            }
        };

        window.onload = function() {
            // Add event listeners to enable drag-n-drop on the whole document
            document.addEventListener("dragover", ev => {
                // Prevent default to allow drop
                ev.preventDefault();
                ev.dataTransfer.dropEffect = "link";
            }, false);
            document.addEventListener("drop", onDrop);

            // We need to recreate everything whenever a setting is changed
            document.addEventListener("change", onChange);
            // Special handling of the reset button, so we can access the reset values immediately
            document.body.querySelector(".customizer-reset input").addEventListener("click", onReset);
        };


        // Renders multiple games
        function renderAll() {
            // Remove any previously generated pages
            document.body.querySelectorAll(".page").forEach(node => node.remove());

            // Grab selected options
            const seed = document.getElementById("seed").valueAsNumber;
            const numGames = parseInt(document.getElementById("games").value);
            const turns = document.getElementById("turns").valueAsNumber;

            // Defines how many of each symbol combination there is
            // [ playerA, playerB, count ]   0=white, 1=green, 2=black
            const deck = [
                [1, 2, document.getElementById("12").valueAsNumber], // green / black - 1 copy
                [1, 0, document.getElementById("01").valueAsNumber], // green / white - 5 copies
                [1, 1, document.getElementById("11").valueAsNumber], // green / green - 3 copies
                [0, 1, document.getElementById("01").valueAsNumber], // white / green - 5 copies
                [2, 1, document.getElementById("12").valueAsNumber], // black / green - 1 copy
                [2, 0, document.getElementById("02").valueAsNumber], // black / white - 1 copy
                [2, 2, document.getElementById("22").valueAsNumber], // black / black - 1 copy
                [0, 0, document.getElementById("00").valueAsNumber], // white / white - 7 copies
                [0, 2, document.getElementById("02").valueAsNumber]  // white / black - 1 copy
            ];

            // Build the html for the key and tracker
            const key = buildKey(deck);
            const tracker = buildTracker(turns);

            // Generate all pages
            for (let gameID = seed; gameID < seed + numGames; gameID++) {
                generateGame(gameID, key, tracker, deck);
            }

            // Add interactivity
            if (document.getElementById("interactive").checked) {
                // Only add interactivity to the first page
                const page = document.body.querySelector(".page");

                // Insert the text inputs to the clue column
                const col2 = page.querySelectorAll("tbody tr td:nth-child(2)");
                col2.forEach(el => {
                    const input = document.createElement("input");
                    input.type = "text";
                    input.className = "tracker-text js-tracker-clue";
                    el.appendChild(input);
                });

                // Add event handler to catch word clicks (except the black words, they shouldn't be marked manually)
                const containers = page.querySelectorAll(".words-container:not(.black) span");
                containers.forEach(e => e.addEventListener("click", onWordClick));

                // Add event handler to catch clicks on the tracker table
                const table = page.querySelector(".tracker tbody");
                table.addEventListener("click", onTrackerClick);
            }
        }

        // Renders one game (two pages)
        function generateGame(gameID, key, tracker, deck) {
            // Avoid console errors if we don't have a wordlist loaded
            const wordsNeeded =  calcNumWords(deck);
            if (allWords.length < wordsNeeded) return;

            // Create a page from the template
            const template = document.getElementById("template");
            const pageA = template.content.cloneNode(true);

            // Start filling in the data, beginning with what is shared between both players
            // They key is static
            pageA.getElementById("key").appendChild(key.cloneNode(true));
            // Create the code for the gametype combination
            const codeText = deck[7][2].toString(21) + deck[2][2].toString(21) + deck[6][2].toString(21) + "–" + deck[5][2].toString(21) + deck[0][2].toString(21) + deck[1][2].toString(21);
            // Only add the code if the game type isn't the default
            if (codeText !== "731–115") pageA.getElementById("code").textContent = codeText;

            // Game ID is the same for both pages
            pageA.querySelector("slot[name=gameid]").textContent = String(gameID).padStart(3, '0');

            // Insert the requested number of rows to the tracker
            pageA.querySelector(".tracker tbody").appendChild(tracker.cloneNode(true));

            // Put in the translated text (we always need the "Clue" translation so we always add them before we check if helptexts are enabled)
            const language = document.getElementById("lang").value;
            if (language !== "en") { // The english text is already in the template
                const text = translations[language];
                for (id of ["all", "green", "white", "black", "clue"]) {
                    pageA.getElementById(id).innerHTML = text[id];
                }
            }

            // Fill in the gametype data, if they are shown
            if (document.getElementById("help").checked) {
                // Replace the numbers in the "all" helptext with the current numbers and make them bold
                const element = pageA.getElementById("all");
                const words =  element.textContent.split(' ');
                // Number of words to find
                words[words.indexOf("15")] = `<b>${deck[0][2] + deck[1][2] + deck[2][2] + deck[3][2] +deck[4][2]}</b>`;
                // Total number of words
                words[words.indexOf("25")] = `<b>${wordsNeeded}</b>`;
                // Number of turns
                const turns = document.getElementById("turns").valueAsNumber;
                words[words.indexOf("9")] = `<b>${turns}</b>`;
                element.innerHTML = words.join(' ');
            } else {
                // Remove help texts
                pageA.querySelectorAll(".helptext").forEach(node => node.hidden = true);
            }

            // Set the page size
            const pageSize = document.getElementById("size").value;
            if (pageSize !=="A4") {
                const page = pageA.querySelector(".page");
                page.classList.add("js-letter");
            }

            // Grab the required number of random words
            const words = sample(allWords, wordsNeeded, gameID);

            // Both players have an area with all the words
            const sortedWords = [...words].sort(); // sort() is destructive, need to work on a copy of the array
            insertWords(pageA, "allwords", sortedWords);

            // The rest of the data is different so we need to duplicate the node to fill them in separately
            const pageB = pageA.cloneNode(true);
            pageB.querySelector(".player use").attributes.href.value = "#circle-B";

            // Holder for each player's words, index 0 = white, 1 = green, 2 = black
            const wordsA = [ [], [], [] ], wordsB = [ [], [], [] ];
            let wordIndex = 0;
            // Iterate over the 9 combinations and assign words to each player
            for (const data of deck) {
                for (let n = 0; n < data[2]; n++) { // The 3rd value is the number of words
                    wordsA[data[0]].push(words[wordIndex]); // 1st value is what type of word this is for player A
                    wordsB[data[1]].push(words[wordIndex]); // 2nd value is for player B
                    wordIndex++;
                }
            }

            // Place the words into the template
            // Player A
            insertWords(pageA, "whitewords", wordsA[0].sort());
            insertWords(pageA, "greenwords", wordsA[1].sort());
            insertWords(pageA, "blackwords", wordsA[2].sort());
            // Player B
            insertWords(pageB, "whitewords", wordsB[0].sort());
            insertWords(pageB, "greenwords", wordsB[1].sort());
            insertWords(pageB, "blackwords", wordsB[2].sort());

            // Add the pages in their respective section
            const player = document.getElementById("page").value;
            if (player !== "B") document.body.insertBefore(pageA, document.getElementById("separator"));
            if (player !== "A") document.body.appendChild(pageB);
        }

        // Takes an array of words and puts them into divs at the specified location
        function insertWords(template, id, words) {
            template.getElementById(id).append(...words.map(w => {
                const div = document.createElement("div");
                // Need to wrap the word in a span to allow for border styling when using interactive mode
                const span = document.createElement("span");
                span.textContent = w;
                span.dataset.word = w; // So interactive mode can easily find words with css selectors
                div.appendChild(span);
                return div;
            }));
        }

        // Creates the html for the tracker table
        function buildTracker(rows) {
            const row = document.createElement("tr");
            for (let n = 0; n < 6; n++) {
                row.appendChild(document.createElement("td"));
            }

            const tracker = document.createDocumentFragment();
            for (let n = 0; n < rows; n++) {
                tracker.appendChild(row.cloneNode(true));
            }
            return tracker;
        }

        // Creates the svg for the key table
        function buildKey(deck) {
            const lookup = ["white", "star", "black"]; // SVG symbol ids
            let html = "";
            let col = 0;
            for (const type of deck) {
                for (let n = 0; n < type[2]; n++) {
                    // Height & width are needed for Safari (it adheres to the specs)
                    html += `<use href='#${lookup[type[1]]}' x='${col*24}' y='0' width='24' height='24'/>
                    <use href='#${lookup[type[0]]}' x='${col*24}' y='44' width='24' height='24'/>
                    <use href='#arrows' x='${col*24}' y='22' width='24' height='24'/>`;
                    col++;
                }
            }

            const key = document.createElement("div");
            // The symbols are nudged 2 pixels towards the arrows. So total height is 68 instead of 72.
            key.innerHTML = `<svg class='key' viewBox='0 0 ${col * 24} 68'>` + html + "</svg>";
            return key;
        }

        // Calculate how many words in total (normal game is 25)
        function calcNumWords(deck) {
            return deck.reduce((prev, curr) => prev + curr[2], 0);
        }


        // Called when files are dropped on the window
        function onDrop(ev) {
            // Prevent file from being opened
            ev.preventDefault();

            // Remove any previous words
            allWords = [];

            if (ev.dataTransfer.items) {
                const promises = [];
                for (const item of ev.dataTransfer.items) {
                    // Ignore dropped items that aren't files
                    if (item.kind === "file") {
                        const file = item.getAsFile();
                        console.log(`File: ${file.name}`);
                        promises.push(file.text());
                    }
                }

                // Wait for all dropped files to be read, then collect the words
                Promise.all(promises).then((results) => addWordlists(results));
            }
        }

        function addWordlists(lists) {
            for (const txt of lists) {
                // split() makes each line an array item. filter() removes empty lines.
                allWords.push(...txt.split(/\r?\n/).filter(Boolean).map(w => w.toUpperCase()));
            }
            // Remove duplicates
            allWords = [...new Set(allWords)];
            const len = allWords.length;
            console.log(`Loaded ${len} words`);
            if (len < 25) throw new RangeError("Need at least 25 words!");
            document.getElementById("status").innerHTML = `${len} words loaded. <a href='javascript:window.print()'>Click here</a> to print or save as PDF.`;
            renderAll();
        }

        // Called when a form element changes
        function onChange(ev) {
            // Ignore events from the interactive text input
            if (ev.target.classList.contains("js-tracker-clue")) return;

            // Is it a wordlist load?
            if (ev.target.id === "wordlist") {
                fetch(`https://raw.githubusercontent.com/wahlstedt/codebook/master/wordlists/${ev.target.value}.txt`).then(r =>r.text()).then(result => {
                    allWords = [];
                    addWordlists([result]);
                });
                return;
            }

            // A setting has changed and we need to re-render all pages
            renderAll();
        }
        
        // Called when the customizer form is reset
        // (Uses a click event handler since the reset event is triggered BEFORE the values are reset)
        function onReset(ev) {
            ev.preventDefault();
            // Manually reset the form, so we get updated values
            ev.srcElement.form.reset();
            renderAll();
        }

        // Handle clicks on the advanced settings expander
        function onExpand(ev) {
            let items = document.getElementsByClassName("advanced");
            const caret = document.getElementById("expander");
            for (let element of items) {
                if (window.getComputedStyle(element).display === "none") {
                    element.style.display = element.classList.contains("customizer") ? "grid" : "block"; // Hacky...
                    caret.textContent = "expand_less";
                } else {
                    element.style.display = "none";
                    caret.textContent = "expand_more";
                }
            }
        }

        // Called when clicking on the words
        function onWordClick(ev) {
            const cl = ev.target.classList;
            const page = ev.target.closest(".page"); // Get the current page element
            // Find the 2 instances of the clicked word
            const words = page.querySelectorAll(`.words-container [data-word="${ev.target.textContent}"]`);

            if (cl.contains("js-strike")) {
                // White words should only be possible to cross off, not find
                if (ev.target.closest("#whitewords")) {
                    cl.value = '';
                } else {
                    // When circling a word we should also circle the same word in the other list
                    words.forEach(e => e.className = "js-circle");
                }
            } else if (cl.contains("js-circle")) {
                // We also need to remove the circle in the other list
                words.forEach(e => e.className = '');
            } else { // Unmarked word
                // Green words should only be possible to find, not cross off
                if (ev.target.closest("#greenwords")) {
                    words.forEach(e => e.className = "js-circle");
                } else {
                    cl.add("js-strike");
                }
            }
        }

        // Called when a cell in the tracker table is clicked
        function onTrackerClick(ev) {
            switch (ev.target.cellIndex) {
                case 0: // User
                    ev.target.textContent = toggle(ev.target.textContent, ["A", "B"]);
                    break;
                case 2: // Clue number
                    ev.target.textContent = toggle(ev.target.textContent, ["1", "2", "3", "4", "0"]);
                    break;
                case 3: // Correct guesses
                    ev.target.textContent = toggle(ev.target.textContent, ["", "1", "2", "3", "4"]);
                    break;
                case 4: // Mistakes
                    ev.target.textContent = toggle(ev.target.textContent, ["", "1"]);
                    break;
                case 5: // Remaining
                    ev.target.textContent = toggle(ev.target.textContent, ["", "1", "2", "3", "4"]);
                    break;
            }
        }

        // Toggles through a series of options
        function toggle(current, options) {
            const idx = options.indexOf(current);
            return (idx === -1 || idx === options.length-1) ? options[0] : options[idx+1];
        }

        // Chooses k unique random elements from pool
        function sample(pool, k, seed = 1) {
            const n = pool.length;
            if (k < 0 || k > n) throw new RangeError("Sample larger than population or is negative");
            const rand = mulberry32(seed);
            const selected = new Set();
            while (selected.add(rand() * n | 0).size < k) {}
            return [...selected].map(x => pool[x]);
        }

        // Seedable PRNG
        function mulberry32(seed) {
            return function () {
                let t = seed += 0x6D2B79F5;
                t = Math.imul(t ^ t >>> 15, t | 1);
                t ^= t + Math.imul(t ^ t >>> 7, t | 61);
                return ((t ^ t >>> 14) >>> 0) / 4294967296;
            }
        }
    </script>
</head>

<template id="template">
    <div class="page">
        <div class="top">
            <div class="topgrid">
                <svg class="player"><use href="#circle-A"/></svg>
                <div class="header">
                    <span class="title">C</span>
                    <svg class="icon"><use href="#white"/><use href="#black" x="8" width="8"/></svg>
                    <span class="title">D</span>
                    <span class="title">E</span>
                    <span class="title">B</span>
                    <svg class="icon"><use href="#white"/></svg>
                    <svg class="icon"><use href="#white"/></svg>
                    <span class="title">K</span>
                    <p id="code"></p>
                </div>
                <div class="gameid">
                    <slot name="gameid">000</slot>
                </div>
                <div class="key" id="key">
                </div>
            </div>
            <div id="allwords" class="words-container">
            </div>
            <div id="all" class="helptext">
                Select from these words. Mark found words below as well. You and your partner need to find 15 out of 25 words in 9 turns.
            </div>
        </div>
        <div class="left">
            <div id="star" class="star">
                <svg class="icon"><use href="#star"/></svg>
            </div>
            <div id="greenwords" class="words-container green">
            </div>
            <div id="green" class="helptext">
                Give clues to these words. Mark found words above as well.
            </div>
            <div id="whitewords" class="words-container green white">
            </div>
            <div id="white" class="helptext">
                If your partner selects one of these words, the turn ends.
            </div>
            <div id="blackwords" class="words-container black">
            </div>
            <div id="black" class="helptext">
                If your partner selects one of these words, the game is lost!
            </div>
        </div>
        <div class="right">
            <table class="tracker">
                <thead>
                <tr>
                    <th><span class="material-icons">face</span></th>
                    <th id="clue">Clue</th>
                    <th><span class="material-icons">numbers</span></th>
                    <th><span class="material-icons">check</span></th>
                    <th><span class="material-icons">clear</span></th>
                    <th><span class="material-icons">question_mark</span></th>
                </tr>
                </thead>
                <tbody class="tracker-text">
                </tbody>
            </table>
        </div>
    </div>
</template>

<body>
<svg style="display:none">
    <symbol id="star" viewBox="0 0 24 24" fill="#000000"><ellipse fill="white" ry="12" rx="12" id="back" cy="12" cx="12"/><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm7.48 7.16l-5.01-.43-2-4.71c3.21.19 5.91 2.27 7.01 5.14zm-5.07 6.26L12 13.98l-2.39 1.44.63-2.72-2.11-1.83 2.78-.24L12 8.06l1.09 2.56 2.78.24-2.11 1.83.64 2.73zm-2.86-11.4l-2 4.72-5.02.43c1.1-2.88 3.8-4.97 7.02-5.15zM4 12c0-.64.08-1.26.23-1.86l3.79 3.28-1.11 4.75C5.13 16.7 4 14.48 4 12zm3.84 6.82L12 16.31l4.16 2.5c-1.22.75-2.64 1.19-4.17 1.19-1.52 0-2.94-.44-4.15-1.18zm9.25-.65l-1.11-4.75 3.79-3.28c.14.59.23 1.22.23 1.86 0 2.48-1.14 4.7-2.91 6.17z"/></symbol>
    <symbol id="white" viewBox="0 0 24 24" fill="#000000"><path d="M12,2C6.47,2,2,6.47,2,12c0,5.53,4.47,10,10,10s10-4.47,10-10C22,6.47,17.53,2,12,2z M12,20c-4.42,0-8-3.58-8-8 c0-4.42,3.58-8,8-8s8,3.58,8,8C20,16.42,16.42,20,12,20z"/></symbol>
    <symbol id="black" viewBox="0 0 24 24" fill="#000000"><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"/></symbol>
    <symbol id="arrows" viewBox="0 0 24 24"  fill="#000000"><polygon points="13,6.99 16,6.99 12,3 8,6.99 11,6.99 11,17.01 8,17.01 12,21 16,17.01 13,17.01"/></symbol>
    <symbol id="circle-A" viewBox="0 0 512 512"><path d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM362.1 365.8c-3.266 1.506-6.687 2.229-10.05 2.229c-9.078 0-17.75-5.18-21.81-14l-12.03-26.18H193.8l-12.03 26.18c-5.576 12.09-19.76 17.36-31.86 11.77c-12.03-5.559-17.28-19.91-11.73-31.99l95.99-208.1c7.842-17.08 35.75-17.08 43.59 0l95.99 208.1C379.3 345.9 374.1 360.2 362.1 365.8zM215.1 279.6h80.05L256 192.5L215.1 279.6z"/></symbol>
    <symbol id="circle-B" viewBox="0 0 512 512"><path d="M292 280H208v56h84C307.4 336 320 323.4 320 308S307.4 280 292 280zM304 204c0-15.44-12.56-28-28-28H208v56h68C291.4 232 304 219.4 304 204zM256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM292 384H184C170.8 384 160 373.3 160 360v-208C160 138.8 170.8 128 184 128h92C317.9 128 352 162.1 352 204c0 16.35-5.301 31.41-14.12 43.82C356.1 261.7 368 283.4 368 308C368 349.9 333.9 384 292 384z"/></symbol>
  </svg>

<a class="github-fork-ribbon" href="https://github.com/wahlstedt/codebook" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>

<div class="settings">
   <div id="status" class="status">Drop one or more textfiles on this window to generate game pages.</div>

    <div class="settings-wordlist">Wordlist<br>
        <select name="wordlist" id="wordlist">
            <option value="en"></option>
            <optgroup label="English">
            <option value="en">English</option>
            <option value="e_duet">English DUET</option>
            <option value="en_undercover_v2">English Undercover</option>
            </optgroup>
            <option value="af">Afrikaans</option>
            <option value="sq">Albanian</option>
            <option value="ar">Arabic</option>
            <option value="ar-lb">Arabic (Lebanon)</option>
            <option value="bg">Bulgarian</option>
            <option value="bg_duet">Bulgarian DUET</option>
            <option value="ca">Catalan</option>
            <option value="zh">Chinese</option>
            <option value="cz">Czech</option>
            <option value="cz_duet">Czech DUET</option>
            <option value="dk">Danish</option>
            <option value="dk_duet">Danish DUET</option>
            <option value="nl">Dutch</option>
            <option value="nl_duet">Dutch DUET</option>
            <option value="eo">Esperanto</option>
            <option value="et">Estonian</option>
            <option value="fi">Finish</option>
            <option value="fi_duet">Finish DUET</option>
            <option value="fr">French</option>
            <option value="fr_duet">French DUET</option>
            <option value="de">German</option>
            <option value="de_duet">German DUET</option>
            <option value="gr">Greek</option>
            <option value="gr_duet">Greek DUET</option>
            <option value="he">Hebrew</option>
            <option value="he_duet">Hebrew DUET</option>
            <option value="hu">Hungarian</option>
            <option value="is">Icelandic</option>
            <option value="id">Indonesian</option>
            <option value="it">Italian</option>
            <option value="it_duet">Italian DUET</option>
            <option value="jp">Japanese</option>
            <option value="jp_duet">Japanese DUET</option>
            <option value="ko">Korean</option>
            <option value="ko_duet">Korean DUET</option>
            <option value="lv">Latvian</option>
            <option value="lt">Lithuanian</option>
            <option value="mk">Macedonian</option>
            <option value="no">Norwegian</option>
            <option value="no_duet">Norwegian DUET</option>
            <option value="fa">Persian</option>
            <option value="pl">Polish</option>
            <option value="pl_duet">Polish DUET</option>
            <option value="pt">Portuguese</option>
            <option value="pt_duet">Portuguese DUET</option>
            <option value="ro">Romanian</option>
            <option value="ro_duet">Romanian DUET</option>
            <option value="ru">Russian</option>
            <option value="ru_duet">Russian</option>
            <option value="sr">Serbian</option>
            <option value="sk">Slovak</option>
            <option value="sk_duet">Slovak DUET</option>
            <option value="sl">Slovenian</option>
            <option value="es">Spanish</option>
            <option value="es_duet">Spanish DUET</option>
            <option value="sv">Swedish</option>
            <option value="sv_duet">Swedish DUET</option>
            <option value="th">Thai</option>
            <option value="tl">Tagalog</option>
            <option value="tr">Turkish</option>
            <option value="uk">Ukrainian</option>
        </select>
    </div>

    <div class="settings-start">Start ID<br>
        <input type="number" id="seed" name="seed" min="0" max="99999" step="10" value="1">
    </div>

    <div class="settings-games">Number of games<br>
        <select name="games" id="games">
            <option selected>1</option>
            <option>5</option>
            <option>10</option>
            <option>25</option>
            <option>50</option>
            <option>100</option>
        </select>
    </div>
    
    <div class="expand" onclick="onExpand()">Advanced settings <span id="expander" class="material-icons">expand_more</span></div>

    <div class="settings-size advanced">Page size<br>
        <select name="size" id="size">
            <option value="A4">A4</option>
            <option value="letter">US Letter</option>
        </select>
    </div>

    <div class="settings-page advanced">Pages<br>
        <select name="page" id="page">
            <option>Both</option>
            <option value="A">Only A</option>
            <option value="B">Only B</option>
        </select>
    </div>

    <div class="settings-lang advanced">Language<br>
        <select name="lang" id="lang">
            <option value="en">English</option>
            <option value="sv">Swedish</option>
        </select>
    </div>

    <div class="setting-help advanced"><input type="checkbox" id="help" name="help" checked>
        <label for="help">Include help texts</label>
    </div>
    <div class="customizer advanced">
        <div class="customizer-title">Game configuration</div>
        <form>
            <div class="customizer-symbol">
                <svg class="icon"><use href="#white"/></svg><br>
                <svg class="icon"><use href="#white"/></svg>
            </div>
            <div class="customizer-symbol">
                <svg class="icon"><use href="#star"/></svg><br>
                <svg class="icon"><use href="#star"/></svg>
            </div>
            <div class="customizer-symbol">
                <svg class="icon"><use href="#black"/></svg><br>
                <svg class="icon"><use href="#black"/></svg>
            </div>
            <div class="customizer-symbol">
                <svg class="icon"><use href="#black"/></svg><br>
                <svg class="icon"><use href="#white"/></svg>
            </div>
            <div class="customizer-symbol">
                <svg class="icon"><use href="#black"/></svg><br>
                <svg class="icon"><use href="#star"/></svg>
            </div>
            <div class="customizer-symbol">
                <svg class="icon"><use href="#star"/></svg><br>
                <svg class="icon"><use href="#white"/></svg>
            </div>

            <div class="customizer-turns-title">Turns</div>

            <div class="customizer-start-col">
                <input type="number" id="00" min="0" max="20" value="7">
            </div>
            <div>
                <input type="number" id="11" min="0" max="20" value="3">
            </div>
            <div>
                <input type="number" id="22" min="0" max="10" value="1">
            </div>
            <div>
                <input type="number" id="02" min="0" max="10" value="1">
            </div>
            <div>
                <input type="number" id="12" min="0" max="10" value="1">
            </div>
            <div>
                <input type="number" id="01" min="0" max="10" value="5">
            </div>

            <div class="customizer-line"></div>
            <div class="customizer-line"></div>

            <div class="customizer-info">
                Total count
            </div>
            <div class="customizer-info">
                Count per player
            </div>

            <div class="setting-turns">
                <input type="number" id="turns" name="turns" min="2" max="20" value="9">
            </div>

            <div class="customizer-reset">
                <input type="reset">
            </div>
        </form>
    </div>

    <div class="setting-interact advanced">
        <input type="checkbox" id="interactive" name="interactive" checked>
        <label for="interactive">Interactive</label>
    </div>
</div>

<div id="separator"></div>

</body>
</html>
